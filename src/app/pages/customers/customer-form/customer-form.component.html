<div class="customer-form-container">
  <mat-card class="form-card">
    <mat-card-header>
      <mat-card-title>
        <h2 class="form-title">{{ formTitle }}</h2>
      </mat-card-title>
      <mat-card-subtitle>
        Remplissez les informations du client
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="customerForm" (ngSubmit)="onSubmit()" class="form-fields">
        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Prénom</mat-label>
            <input 
              matInput 
              formControlName="firstName" 
              placeholder="Entrez le prénom"
              required>
            <mat-error *ngIf="customerForm.get('firstName')?.hasError('required')">
              Le prénom est requis
            </mat-error>
            <mat-error *ngIf="customerForm.get('firstName')?.hasError('maxlength')">
              Maximum 50 caractères
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Nom</mat-label>
            <input 
              matInput 
              formControlName="lastName" 
              placeholder="Entrez le nom"
              required>
            <mat-error *ngIf="customerForm.get('lastName')?.hasError('required')">
              Le nom est requis
            </mat-error>
            <mat-error *ngIf="customerForm.get('lastName')?.hasError('maxlength')">
              Maximum 50 caractères
            </mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Email</mat-label>
            <input 
              matInput 
              type="email" 
              formControlName="email" 
              placeholder="email@exemple.com"
              required>
            <mat-icon matSuffix>email</mat-icon>
            <mat-error *ngIf="customerForm.get('email')?.hasError('required')">
              L'email est requis
            </mat-error>
            <mat-error *ngIf="customerForm.get('email')?.hasError('email')">
              Veuillez entrer un email valide
            </mat-error>
            <mat-error *ngIf="customerForm.get('email')?.hasError('maxlength')">
              Maximum 100 caractères
            </mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Téléphone</mat-label>
            <input 
              matInput 
              type="tel" 
              formControlName="phone" 
              placeholder="+33 6 12 34 56 78">
            <mat-icon matSuffix>phone</mat-icon>
            <mat-error *ngIf="customerForm.get('phone')?.hasError('pattern')">
              Format de téléphone invalide
            </mat-error>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Adresse</mat-label>
          <textarea 
            matInput 
            formControlName="address" 
            placeholder="Adresse complète"
            rows="2"></textarea>
          <mat-icon matSuffix>location_on</mat-icon>
          <mat-error *ngIf="customerForm.get('address')?.hasError('maxlength')">
            Maximum 200 caractères
          </mat-error>
        </mat-form-field>

        <div class="form-row">
          <mat-form-field appearance="outline" class="form-field">
            <mat-label>Société</mat-label>
            <input 
              matInput 
              formControlName="company" 
              placeholder="Nom de l'entreprise">
            <mat-icon matSuffix>business</mat-icon>
            <mat-error *ngIf="customerForm.get('company')?.hasError('maxlength')">
              Maximum 100 caractères
            </mat-error>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="form-field">
          <mat-label>Notes</mat-label>
          <textarea 
            matInput 
            formControlName="notes" 
            placeholder="Notes supplémentaires"
            rows="3"></textarea>
          <mat-icon matSuffix>notes</mat-icon>
          <mat-error *ngIf="customerForm.get('notes')?.hasError('maxlength')">
            Maximum 500 caractères
          </mat-error>
        </mat-form-field>

        <div class="form-actions">
          <button 
            mat-stroked-button 
            type="button" 
            [routerLink]="isEditMode && customerId ? ['/customers', customerId] : ['/customers']"
            [disabled]="isLoading">
            Annuler
          </button>
          
          <button 
            mat-raised-button 
            color="primary" 
            type="submit"
            [disabled]="customerForm.invalid || isLoading">
            <mat-spinner *ngIf="isLoading" diameter="20" class="button-spinner"></mat-spinner>
            {{ submitButtonText }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>
